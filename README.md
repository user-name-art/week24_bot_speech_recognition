# Боты-помощники в Telegram и VK с обработкой сообщений в DialogFlow

Боты для **Telegram** и **VK**, которые умеют распознавать вопросы от пользователей и отвечать на них. Боты работают на базе облачного сервиса **DialogFlow**, который представляет собой платформу для понимания естественного языка с возможностью обучения и интеграции диалогового пользовательского интерфейса в другие приложения.

![Record_2024-02-02-17-40-52](https://github.com/user-name-art/week24_bot_speech_recognition/assets/112713337/242face5-baa8-4d4e-a6e3-21511a108c2f)

![Record_2024-02-02-17-44-03](https://github.com/user-name-art/week24_bot_speech_recognition/assets/112713337/48b1ee27-a56e-4e62-96e9-5017cebd4d88)

Примеры ботов:
* [Telegram](https://t.me/art_2024_speech_recognition_bot)
* Сообщество [VK](https://vk.com/club224363232)

## Как установить

Скачайте код
```
https://github.com/user-name-art/week24_bot_speech_recognition.git
```
При необходимости создайте виртуальное окружение. Например: 
```
python -m venv .venv
``` 
Установите зависимости:
```
pip install -r requirements.txt
```

## Как запустить

Для работы понадобится файл **.env**. 
* **GOOGLE_PROJECT_ID** идентификатор проекта в DialogFlow. Подробнее в документации [Google Cloud](https://cloud.google.com/dialogflow/docs/quick/setup).
* **GOOGLE_APPLICATION_CREDENTIALS** путь до json-файла с ключами от Google. Подробнее в документации [Google Cloud](https://cloud.google.com/docs/authentication/api-keys). 
* **TG_BOT_TOKEN** токен Telegram-бота.
* **TG_ADMIN_ID** id пользователя в Telegram, который будет получать логи об ошибках ботов. Можно узнать, написав в Telegram специальному боту [@userinfobot](https://telegram.me/userinfobot).
*  **VK_TOKEN** токен бота ВКонтакте.

Боты запускаются по-отдельности соответствующими скриптами:
```
python tg_bot.py
```
или 
```
python vk_bot.py
```
Также есть скрипт **dialogflow_learning_script** для обучения DialogFlow с помощью заранее заготовленных фраз. Для этого понадобится создать json-файл следующего вида:
```
{
    "Устройство на работу": {
        "questions": [
            "Как устроиться к вам на работу?",
            "Как устроиться к вам?",
            "Как работать у вас?",
            "Хочу работать у вас",
            "Возможно-ли устроиться к вам?",
            "Можно-ли мне поработать у вас?",
            "Хочу работать редактором у вас"
        ],
        "answer": "Если вы хотите устроиться к нам, напишите на почту game-of-verbs@gmail.com мини-эссе о себе и прикрепите ваше портфолио."
    },
    "Забыл пароль": {
        "questions": [
            "Не помню пароль",
            "Не могу войти",
            "Проблемы со входом",
            "Забыл пароль",
            "Забыл логин",
            "Восстановить пароль",
            "Как восстановить пароль",
            "Неправильный логин или пароль",
            "Ошибка входа",
            "Не могу войти в аккаунт"
        ],
        "answer": "Если вы не можете войти на сайт, воспользуйтесь кнопкой «Забыли пароль?» под формой входа. Вам на почту прийдёт письмо с дальнейшими инструкциями. Проверьте папку «Спам», иногда письма попадают в неё."
    }
}
```
По умолчанию скрипт ищет файл questions.json в папке со скриптом. При необходимости вы можете передать путь к файлу в качестве аргумента при запуске. Например: 
```
python dialogflow_learning_script.py /home/user/projects/q.json
```

После этого можно запустить скрипт:
```
python dialogflow_learning_script.py
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
